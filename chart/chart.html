<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="renderer" content="webkit">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>简易chart</title>

<link href="https://lib.baomitu.com/normalize/latest/normalize.min.css" rel="stylesheet">

<style>
	/* css style */
	body {
		padding: 0 10px 10px 10px;
	}

	.zchart {
		width: 15%;
		height: 9vw;
		border:solid 1px #ddd;
	}
	@media (max-width: 767px) {
		.zchart {
			width: 40%;
			height: 30vw;
			border:solid 1px #ddd;
		}
	}
</style>

<script src="https://lib.baomitu.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://lib.baomitu.com/color-js/1.0/color.js"></script>
<script src="https://lib.baomitu.com/tween.js/2/Tween.min.js"></script>

<script src="../js/ztool.js"></script>
<script src="../js/zdraw_base.js"></script>
<script src="../js/zdraw.js"></script>
<script src="../js/zchart.js"></script>
</head>
<body>
<!-- 内容 -->

<h3>饼图</h3>
<canvas class="zchart">
{
	"type":"pie",
	"list":[
		{"val":100, "color":"blue"},
		{"val":200, "color":"gray"}
	]
}
</canvas>
<canvas class="zchart">
{
	"type":"pie",
	"font_color":"#fff",
	"list":[
		{"val":100, "color":"blue"},
		{"val":200, "color":"gray"},
		{"val":300, "color":"#f00|#a00"}
	]
}
</canvas>
<canvas class="zchart">
{
	"type":"pie",
	"val":38,
	"color":"#f00|#a00"
}
</canvas>
<canvas class="zchart">
{
	"type":"pie",
	"font_color":"#0f0",
	"list":[
		{"val":100},
		{"val":200},
		{"val":300},
		{"val":500},
		{"val":300},
		{"val":20},
		{"val":200}
	]
}
</canvas>

<h3>进度圆环</h3>
<canvas class="zchart">
{
	"type":"ring",
	"val":75
}
</canvas>
<canvas id="ring1" class="zchart">
{
	"type":"ring",
	"val": 87,
	"size": 30,
	"back_color":"#aaa",
	"max":360,
	"unit": "°"
}
</canvas>
<canvas class="zchart">
{
	"type":"ring",
	"led":36,
	"val":75,
	"unit": "%"
}
</canvas>
<canvas class="zchart">
{
	"type":"ring",
	"led":100,
	"val":75
}
</canvas>
<canvas class="zchart">
{
	"type":"ring",
	"val": 87,
	"size": 30,
	"color": "#f00|#a00",
	"font": "50px Arial"
}
</canvas>
<br>
<button onclick="$('#ring1').trigger('setVal', [Math.round(Math.random() * 360)]);">设置</button>

<h3>折线图</h3>
<canvas class="zchart">
{
	"type":"line",
	"list":[3,9,1,5,2,11,8,5]
}
</canvas>
<canvas class="zchart">
{
	"type":"line",
	"list":[3,9,1,5,2,11,8,5],
	"border_size":1,
	"color":"#f00|#00f"
}
</canvas>
<canvas class="zchart">
{
	"type":"line",
	"list":[3,9,1,5,2,11,8,5],
	"point_size":3,
	"point_color":"red",
	"color":"#666",
	"max":10,
	"min":-10
}
</canvas>
<canvas class="zchart">
{
	"type":"line",
	"size":0,
	"point_size":2,
	"fill_color":"#00f|#fff|90",
	"list":[3,9,1,5,2,7,8,5],
	"curve":true
}
</canvas>

<h3>柱状图</h3>
<canvas class="zchart">
{
	"type":"bar",
	"list":[
		{"name":"1月", "val":3},
		{"name":"2月", "val":9},
		{"name":"3月", "val":1},
		{"name":"5月", "val":5},
		{"name":"6月", "val":2},
		{"name":"7月", "val":7},
		{"name":"8月", "val":8},
		{"name":"9月", "val":5},
		{"name":"10月", "val":10},
		{"name":"11月", "val":4, "color":"#f00"},
		{"name":"12月", "val":7}
	]
}
</canvas>
<canvas class="zchart">
{
	"type":"bar",
	"color":"#eee|#f00|45",
	"list":[
		{"name":"中国", "val":3},
		{"name":"美国", "val":9},
		{"name":"日本", "val":1},
		{"name":"俄罗斯", "val":5}
	]
}
</canvas>
<canvas class="zchart">
{
	"type":"bar",
	"color":"#00f",
	"show":"3d_rect",
	"list":[
		{"name":"中国", "val":3},
		{"name":"美国", "val":9},
		{"name":"日本", "val":1},
		{"name":"俄罗斯", "val":5}
	]
}
</canvas>
<canvas class="zchart">
{
	"type":"bar",
	"color":"#f00",
	"show":"3d_circle",
	"list":[
		{"name":"中国", "val":3},
		{"name":"美国", "val":9},
		{"name":"日本", "val":1},
		{"name":"俄罗斯", "val":5}
	]
}
</canvas>

<h3>横向对比图</h3>
<canvas class="zchart">
{
	"type":"hbar",
	"right":20,
	"list":[
		{"name":"中国", "val":3},
		{"name":"USA", "val":9},
		{"name":"美国", "val":9},
		{"name":"日本", "val":1},
		{"name":"法国", "val":0},
		{"name":"俄罗斯", "val":5},
		{"name":"中国", "val":3},
		{"name":"美国", "val":9},
		{"name":"日本", "val":1},
		{"name":"俄罗斯", "val":5},
		{"name":"中国", "val":3, "color":"red"},
		{"name":"美国", "val":9},
		{"name":"日本", "val":1},
		{"name":"俄罗斯", "val":5},
		{"name":"中国", "val":3},
		{"name":"美国", "val":9},
		{"name":"日本", "val":1},
		{"name":"俄罗斯", "val":5}
	]
}
</canvas>
<canvas class="zchart">
{
	"type":"hbar",
	"right":20,
	"back_color":false,
	"line_height":20,
	"color":"#fbb|#f00|90",
	"list":[
		{"name":"中国", "val":3},
		{"name":"USA", "val":9},
		{"name":"美国", "val":9},
		{"name":"日本", "val":1},
		{"name":"法国", "val":0},
		{"name":"俄罗斯", "val":5}
	]
}
</canvas>

<h3>颜色标签</h3>
<canvas class="zchart">
{
	"type":"tag_val",
	"list":[3,7,14,18,9,11,5,3,7,14,18,-1,9,11,5,3,7,14,18,9,11,5,3,7,14,18,9,11,5],
	"max":20,
	"r":5,
	"color_h":250
}
</canvas>
<canvas class="zchart">
{
	"type":"tag",
	"padding":10,
	"list":[
		{"name":"中国", "color":"#f00"},
		{"name":"USA", "color":"#0f0"},
		{"name":"美国", "color":"#00f"},
		{"name":"日本", "color":"#ff0", "blink":true},
		{"name":"法国", "color":"#f0f"},
		{"name":"俄罗斯", "color":"#0ff"},
		{"name":"中国", "color":"#f00"},
		{"name":"USA", "color":"#0f0"},
		{"name":"美国", "color":"#00f"},
		{"name":"日本", "color":"#ff0", "blink":true},
		{"name":"法国", "color":"#f0f"},
		{"name":"俄罗斯", "color":"#0ff"},
		{"name":"中国", "color":"#f00|#00f|90"},
		{"name":"USA", "color":"#0f0"},
		{"name":"美国", "color":"#00f", "blink":true},
		{"name":"日本", "color":"#ff0"},
		{"name":"法国", "color":"#f0f"},
		{"name":"俄罗斯", "color":"#0ff"}
	]
}
</canvas>

<h3>数字显示</h3>
<canvas id="num1" class="zchart" style="height: 100px;">
{
	"type":"num",
	"val": 315,
	"val_count": 5,
	"r":5,
	"color":"#00f",
	"back_color":"#fff",
	"border": 2,
	"val_padding":5
}
</canvas>
<canvas id="num2" class="zchart" style="height: 100px;">
{
	"type":"num",
	"val": 315,
	"val_count": 5,
	"back_color":"#fff|#0f0|90",
	"color":"#f00|#00f|90",
	"border": 1
}
</canvas>
<br>
<button onclick="$('#num1').trigger('setVal', [ZTool.rand(100, 2000)]);">设置1</button>
<button onclick="$('#num2').trigger('setVal', [ZTool.rand(0, 1000), '#00f|#f00|90']);">设置2</button>

<h3>进度</h3>
<canvas id="prog1" class="zchart" style="height: 30px;">
{
	"type":"progress",
	"val": 75
}
</canvas>
<canvas class="zchart" style="height: 30px;">
{
	"type":"progress",
	"val_padding": 3,
	"back_color":"#000",
	"color":"#0f0",
	"val": 75
}
</canvas>
<canvas class="zchart" style="height: 30px;">
{
	"type":"progress",
	"val": 56,
	"r": 5,
	"color":"#00f",
	"back_color":"#fee",
	"border": 1
}
</canvas>
<canvas class="zchart" style="height: 30px;">
{
	"type":"progress",
	"val": 56,
	"val_padding": 3,
	"r": 5,
	"color":"#00f",
	"back_color":"#fee",
	"border": 1
}
</canvas>
<canvas class="zchart" style="height: 30px;">
{
	"type":"progress",
	"val": 56,
	"led": true
}
</canvas>
<canvas class="zchart" style="height: 30px;">
{
	"type":"progress",
	"val": 56,
	"led": true,
	"color":"#f00|#faa",
	"r": 3,
	"border": 1
}
</canvas>
<br>
<button onclick="$('#prog1').trigger('setVal', [Math.round(Math.random() * 100), '#f00']);">设置</button>

<h3>仪表盘</h3>
<canvas id="gauge1" class="zchart">
{
	"type":"gauge",
	"name": "温度℃",
	"val": 0,
	"min": -200,
	"max": 200,
	"split_color":"#000",
	"split_count":25,
	"color":"#00f"
}
</canvas>
<canvas class="zchart">
{
	"type":"gauge",
	"name": "气温",
	"unit": "℃",
	"val": 150,
	"max": 200,
	"color":"#f00|#00f",
	"split_count":40,
	"pointer_type":2
}
</canvas>
<canvas class="zchart">
{
	"type":"gauge",
	"name": "温度℃",
	"val": 150,
	"max": 200,
	"color":"#000",
	"font_color":"#000",
	"pointer_type":3,
	"pointer_len":1.1,
	"size":30,
	"range_list":[
		{"min":0, "max":90, "color":"#d00|#f00"},
		{"min":90, "max":160, "color":"#0d0"},
		{"min":160, "max":200, "color":"#00d"}
	]
}
</canvas>
<canvas class="zchart">
{
	"type":"gauge",
	"name": "温度℃",
	"val": 150,
	"max": 200,
	"color":"#00f",
	"led":true,
	"split_count":40,
	"pointer_type":2
}
</canvas>
<br>
<button onclick="$('#gauge1').trigger('setVal', [-200 + Math.round(Math.random() * 400), '#f00|#600']);">设置</button>

<h3>液位</h3>
<canvas id="level1" class="zchart">
{
	"type":"level",
	"name": "C01罐",
	"val": 150,
	"max": 200
}
</canvas>
<canvas class="zchart" style="width: 60px;">
{
	"type":"level",
	"name": "C01罐",
	"val": 98
}
</canvas>
<canvas class="zchart">
{
	"type":"level",
	"name": "C01罐",
	"val": 95
}
</canvas>
<canvas class="zchart">
{
	"type":"level",
	"name": "C01罐",
	"color":"#a00|#f00",
	"max": 50,
	"unit": "t",
	"val": 25
}
</canvas>
<canvas class="zchart">
{
	"type":"level",
	"name": "C01罐",
	"color":"#a00|#f00",
	"val": 3
}
</canvas>
<br>
<button onclick="$('#level1').trigger('setVal', [Math.round(Math.random() * 200), '#f00|#600']);">设置</button>

<h3>性能监控</h3>
<canvas id="monitor1" class="zchart">
{
	"type":"monitor",
	"color":"#000",
	"max":2000
}
</canvas>
<canvas id="monitor2" class="zchart">
{
	"type":"monitor",
	"list":[],
	"line_width":0,
	"max":1000,
	"font_color":"#000",
	"fill_color":"#f00|#0f0|90"
}
</canvas>
<div>当前值：<span id="spanMouseX">-1</span>,<span id="spanMouseY">-1</span></div>

<h3>雷达图</h3>
<canvas class="zchart">
{
	"type":"radar",
	"list":[
		{"name":"数学", "val":98},
		{"name":"语文", "val":87},
		{"name":"英语", "val":53},
		{"name":"物理", "val":76},
		{"name":"化学", "val":10}
	]
}
</canvas>
<canvas class="zchart">
{
	"type":"radar",
	"fill_color":"#fdd|#f00",
	"line_color":"#000",
	"list":[
		{"name":"CPU", "val":98},
		{"name":"内存", "val":87},
		{"name":"硬盘", "val":53},
		{"name":"显卡", "val":76},
		{"name":"网络", "val":60},
		{"name":"电源", "val":57}
	]
}
</canvas>
<canvas class="zchart">
{
	"type":"radar",
	"fill_color":"#fdd|#f00",
	"line_color":"#000",
	"show":"circle",
	"back_color":"#eef|#aaf",
	"border_color":"#999",
	"list":[
		{"name":"CPU", "val":98},
		{"name":"内存", "val":87},
		{"name":"硬盘", "val":53},
		{"name":"显卡", "val":76},
		{"name":"网络", "val":60},
		{"name":"电源", "val":57}
	]
}
</canvas>

<h3>时间图</h3>
<canvas class="zchart" style="width:50%;">
{
	"type":"time",
	"min":"2021-10-01",
	"max":"2021-10-02",
	"list":[
		{"name":"DEV01", "list":[
			{"dt1":"11:12", "dt2":"15:26", "text":"文字abc123"},
			{"dt1":"8:05", "dt2":"10:17", "text":"文字abc123"},
			{"dt1":"3:05", "dt2":"6:17", "text":"文字abc123"}
		]},
		{"name":"DEV02", "list":[
			{"dt1":"16:12", "dt2":"20:26", "text":"文字abc123"},
			{"dt1":"1:35", "dt2":"9:17", "text":"文字abc123"},
			{"dt1":"10:00", "dt2":"11:17", "text":"文字abc123"},
			{"dt1":"22:00", "dt2":"23:55", "text":"文字abc123"}
		]},
		{"name":"DEV03", "list":[
			{"dt1":"16:12", "dt2":"20:26", "text":"文字abc123"},
			{"dt1":"1:35", "dt2":"9:17", "text":"文字abc123"},
			{"dt1":"10:00", "dt2":"11:17", "text":"文字abc123"},
			{"dt1":"22:00", "dt2":"23:55", "text":"文字abc123"}
		]},
		{"name":"DEV04", "list":[
			{"dt1":"16:12", "dt2":"20:26", "text":"文字abc123"},
			{"dt1":"1:35", "dt2":"9:17", "text":"文字abc123"},
			{"dt1":"10:00", "dt2":"11:17", "text":"文字abc123"},
			{"dt1":"22:00", "dt2":"23:55", "text":"文字abc123"}
		]},
		{"name":"DEV04", "list":[
			{"dt1":"16:12", "dt2":"20:26", "text":"文字abc123"},
			{"dt1":"1:35", "dt2":"9:17", "text":"文字abc123"},
			{"dt1":"10:00", "dt2":"11:17", "text":"文字abc123"},
			{"dt1":"22:00", "dt2":"23:55", "text":"文字abc123"}
		]},
		{"name":"DEV04", "list":[
			{"dt1":"16:12", "dt2":"20:26", "text":"文字abc123"},
			{"dt1":"1:35", "dt2":"9:17", "text":"文字abc123"},
			{"dt1":"10:00", "dt2":"11:17", "text":"文字abc123"},
			{"dt1":"22:00", "dt2":"23:55", "text":"文字abc123"}
		]}
	]
}
</canvas>
<canvas class="zchart" style="width:50%;">
{
	"type":"time",
	"min":"2021-07-01",
	"max":"2021-10-02",
	"list":[
		{"name":"DEV01", "list":[
			{"dt1":"2021-07-02", "dt2":"2021-07-10 10:22:33", "text":"文字abc123"},
			{"dt1":"2021-08-01", "dt2":"2021-08-15", "text":"文字abc123"},
			{"dt1":"2021-08-30", "dt2":"2021-09-23", "text":"文字abc123"}
		]},
		{"name":"DEV02", "list":[
			{"dt1":"2021-07-02", "dt2":"2021-07-10 10:22:33", "text":"文字abc123"},
			{"dt1":"2021-08-01", "dt2":"2021-08-15", "text":"文字abc123"},
			{"dt1":"2021-08-30", "dt2":"2021-09-23", "text":"文字abc123"},
			{"dt1":"2021-09-25", "dt2":"2021-10-01", "text":"文字abc123"}
		]}
	]
}
</canvas>

<h3>栅格</h3>
<canvas class="zchart">
{
	"type":"grid",
	"color":"blue",
	"list":[
		[10,20,7],
		[10,21,8],
		[10,22,1],
		[10,23,20],
		[10,24,59],
		[11,20,7],
		[11,21,8],
		[11,22,1],
		[11,23,20],
		[11,26,59]
	]
}
</canvas>
<canvas id="grid1" class="zchart">
{
	"type":"grid",
	"center":[0,0],
	"show":"circle",
	"list":[
		[0,0,1]
	]
}
</canvas>
<br>
<button onclick="setGridVal();">生成栅格数据</button>
<script>
	function setGridVal()
	{
		let list = [];
		for (let x=-100; x<100; x++)
		{
			for (let y=-100; y<100; y++)
			{
				let v = ZTool.rand(0,100);
				if (v > 10)
				{
					list.push([x,y,v]);
				}
			}
		}

		$('#grid1').trigger('setVal', [list]);
	}
</script>

<h3>图片</h3>
<canvas id="image1" class="zchart">
{
	"type":"image",
	"list":[
		{"url":"http://www.xahy.gov.cn/web_files/picture/2021/10/21/202110211730459442058.jpg", "zoom":1},
		{"url":"https://www.baidu.com/img/PCtm_d9c8750bed0b3c7d089fa7d55720d6cf.png", "x":-20, "y":0, "zoom":0.2}
	],
	"point":[
		{"x":20, "y":20},
		{"x":100, "y":100, "size":5, "color":"#f00"}
	]
}
</canvas>
<br>
<button onclick="$('#image1').trigger('fly', [ZTool.rand(-100,100), ZTool.rand(-100,100), ZTool.rand(1,4,2)]);">随机跳转</button>
<button onclick="$('#image1').trigger('fly', [100, 100, 1]);">跳转(100,100)</button>

<script>

$(function(){
	// JS
	ZChart.init();

	$(document).mousemove(function(e){
		$('#spanMouseX').html(e.screenX);
		$('#spanMouseY').html(e.screenY);
	});
	window.setInterval(function(){
		let x = parseInt($('#spanMouseX').html());
		let y = parseInt($('#spanMouseY').html());
		if (x==-1||y==-1)return;
		$('#monitor1').trigger('addVal', x);
		$('#monitor2').trigger('addVal', y);
	}, 50);
});

</script>

</body>
</html>